{"version":3,"file":null,"sources":["/home/adrien/Projects/code/hyperscript-html/src/index.js"],"sourcesContent":["var print = console.log.bind(console)\nvar printd = console.dir.bind(console)\nvar {toStyleStr, fromStyleStr, shorthand, isEmpty, iter} = require('./util.js')\n\n\nvar special = ['area', 'base', 'br', 'col', 'command', 'embed', 'hr', 'img', 'input',\n    'keygen', 'link', 'meta', 'param', 'source', 'track', 'wbr']\n\nfunction HyperScript({tab='\\t', nl='\\n', attrsNl=true, devMode=true}={}) {\n  tab = devMode ? tab : ''\n  nl = devMode ? nl : ''  // nl: newline.\n\n  return function hyperscript(type, attrs, ...children) {\n    // Prep args, make positions flexible.\n    children = Array.isArray(children[0]) ? children[0] : children\n    if (typeof attrs == 'string')\n      [attrs, children] = [{}, [attrs, ...children]]\n    else if(Array.isArray(attrs))\n      [attrs, children] = [{}, attrs]\n    else\n      attrs = attrs || {}\n    attrs.class = attrs.class || []\n    attrs.style = attrs.style || {}\n\n    // Merge all attrs from selector str and 2nd arg obj.\n    if (typeof type === 'string') {\n      var sh = shorthand(type)\n\n      type = sh.tag\n\n      if (!isEmpty(sh.attrs.class))\n        attrs.class = [...new Set([...sh.attrs.class, ...attrs.class])]\n\n      if (!isEmpty(sh.attrs.style))\n        attrs.style = {...sh.attrs.style, ...attrs.style}\n\n      attrs = {...sh.attrs, ...attrs}\n    }\n\n    var el = []\n\n    // Start opening tag.\n    el.push(`<${type}`)\n\n    // Add attributes to tag.\n    for (var [k, v] of iter(attrs)) {\n      if ((k != 'style' && k != 'class') || !isEmpty(v)) {\n        if (attrsNl) el.push(nl)\n        el.push(` ${k}=\"${k == 'class' && !isEmpty(v) ? v.join('.') : k == 'style' && !isEmpty(v) ? toStyleStr(v) : v}\"`)\n      }\n    }\n\n    // End opening tag.\n    el.push('>')\n\n    // Add children within element.\n    if (!isEmpty(children)) {\n      if (devMode) {\n        el.push(nl + tab)\n        // i: index, c: child, eol: end of loop.\n        for(var i = 0, c, eol; eol = !(children.length - 1 - i), c = children[i]; i++)\n          el.push(c.split(nl).join(nl + tab) + (eol ? '' : nl + tab))\n      }\n      else {\n        el.push(children.join(nl))\n      }\n    }\n\n    // Add closing tag.\n    // Check for empty void-elements, and leave off the closing tag.\n    if (!isEmpty(children) || special.indexOf(type) == -1)\n      el.push(`${nl}</${type}>`)\n\n    return el.join('')\n  }\n}\n\n\nif (require && require.main === module) {\n  var h = HyperScript({devMode: true})\n\n  // print(h('div', {hola: 'value'}, h('span', null, h('i', null, 'hello\\ndear\\nnana', 'oh yeah'))))\n\n  // var start = process.hrtime()\n  // for(var i = 0; i < 300000; i++)\n  //   var html = h('div#bob.a.b.c[type=awe][style=background:red; color:green]', {hola: 'value', class: ['c'], style: {color: 'orange'}}, h('span', h('i', 'hello\\ndear\\nnana', 'oh yeah'), h('i', {'eh': true})))\n  // print(process.hrtime(start))\n\n  var html = h('div#bob.a.b.c[type=awe][style=background:red; color:green]', {hola: 'value', class: ['c'], style: {color: 'orange'}}, h('span', h('i', 'hello\\ndear\\nnana', 'oh yeah'), h('i', {'eh': true})))\n\n  print(html)\n}\n"],"names":["print","console","log","bind","printd","dir","require","toStyleStr","fromStyleStr","shorthand","isEmpty","iter","special","HyperScript","tab","nl","attrsNl","devMode","hyperscript","type","attrs","children","Array","isArray","class","style","sh","tag","Set","el","push","k","v","join","i","c","eol","length","split","indexOf","main","module","h","html","hola","color"],"mappings":"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"}